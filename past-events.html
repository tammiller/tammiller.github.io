<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Ladybugs Aachen">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="images/favicon-32x32.png" type="image/png" sizes="32x32">
  <meta name="description" content="Vergangene Veranstaltungen der Ladybugs Aachen. Past events of our women in tech community in Aachen.">

  <!-- Preload the events JSON file -->
  <link rel="preload" href="events1Q.json" as="fetch" crossorigin>

  <title>Vergangene Veranstaltungen | Ladybugs Aachen - Past Events</title>

  <!-- Custom styles for this template -->
  <link href="style.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="components.js"></script>
</head>

<body>
  <div id="navbar-container"></div>

  <div class="container mt-5">
    <h1>Vergangene Veranstaltungen</h1>
    <p class="lead">Ein Rückblick auf unsere bisherigen Events und Workshops.</p>
    
    <div class="row" id="eventsContainer">
      <!-- Loading indicator -->
      <div class="col-12 text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
  </div>

  <div id="footer-container"></div>
  <div id="cookie-banner-container"></div>

  <script>
    async function loadAndDisplayEvents() {
      const eventsContainer = document.getElementById('eventsContainer');
      
      try {
        // Load events from JSON file
        const response = await fetch('events1Q.json');
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const events = await response.json();

        // Create structured data
        const structuredData = {
          "@context": "https://schema.org",
          "@type": "EventSeries",
          "name": "Ladybugs Aachen Past Events",
          "description": "Past meetups and workshops for women in software engineering in Aachen",
          "url": "https://ladybugs-aachen.de/past-events",
          "organizer": {
            "@type": "Organization",
            "name": "Ladybugs Aachen",
            "url": "https://ladybugs-aachen.de"
          },
          "event": events
        };

        // Add structured data to page
        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.textContent = JSON.stringify(structuredData);
        document.head.appendChild(script);

        // Clear loading indicator
        eventsContainer.innerHTML = '';

        // Generate event cards
        events.forEach(event => {
          const eventCard = document.createElement('div');
          eventCard.classList.add('col-md-4', 'mb-4');
          eventCard.innerHTML = `
            <div class="card h-100 shadow-sm border-light">
              <div class="card-body">
                <h5 class="card-title">${event.name}</h5>
                <div class="event-date mb-3">
                  <span class="badge badge-primary">${new Date(event.startDate).toLocaleDateString()}</span>
                </div>
                <p class="card-text">${event.description}</p>
                <p><strong>Datum:</strong> ${new Date(event.startDate).toLocaleDateString("de-DE", {weekday: "short", year: "numeric", month: "long", day: "numeric"})}</p>
                <p><strong>Uhrzeit:</strong> ${new Date(event.startDate).toLocaleTimeString("de-DE", { hour: '2-digit', minute: '2-digit', hour12: false })} - ${new Date(event.endDate).toLocaleTimeString("de-DE", { hour: '2-digit', minute: '2-digit', hour12: false })}</p>
                <p><strong>Location:</strong> ${event.location.name}</p>
                <p class="event-keywords">${event.keywords}</p>
              </div>
            </div>
          `;
          eventsContainer.appendChild(eventCard);
        });
      } catch (error) {
        console.error('Error loading events:', error);
        eventsContainer.innerHTML = `
          <div class="col-12">
            <div class="alert alert-warning" role="alert">
              Die Veranstaltungen konnten nicht geladen werden. Bitte versuchen Sie es später erneut.
            </div>
          </div>
        `;
      }
    }

    // Load events as soon as possible
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadAndDisplayEvents);
    } else {
      loadAndDisplayEvents();
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
</body>

</html> 